#!/bin/bash

# Google Apps Script Setup Guide
# This script helps you set up automatic triggers for Google Docs integration

echo "üîß Google Apps Script Setup Guide"
echo "================================="
echo ""
echo "üìã Step-by-Step Instructions:"
echo ""
echo "1. üìù Create New Google Apps Script Project:"
echo "   - Go to https://script.google.com/"
echo "   - Click 'New Project'"
echo "   - Replace the default code with the contents of 'google-docs-integration.js'"
echo ""
echo "2. üîß Configure the Script:"
echo "   - Update API_WEBHOOK_URL if needed (currently set to your deployed function)"
echo "   - Save the project with a name like 'URL Shortener Integration'"
echo ""
echo "3. üöÄ Deploy as Web App:"
echo "   - Click 'Deploy' ‚Üí 'New deployment'"
echo "   - Choose 'Web app' as type"
echo "   - Execute as: 'Me'"
echo "   - Who has access: 'Anyone' (or restrict as needed)"
echo "   - Click 'Deploy' and copy the web app URL"
echo ""
echo "4. ‚ö° Set Up Triggers (Choose one method):"
echo ""
echo "   Method A - Form-Based Trigger:"
echo "   - Create a Google Form for document submission"
echo "   - Add fields: Document URL, Document Name"
echo "   - In Apps Script, go to 'Triggers' ‚Üí 'Add Trigger'"
echo "   - Function: 'onDocumentEvent'"
echo "   - Event source: 'From form'"
echo "   - Event type: 'On form submit'"
echo ""
echo "   Method B - Folder Monitoring:"
echo "   - Create a shared folder for Google Docs"
echo "   - Set up a time-based trigger to check for new docs"
echo "   - Function: 'manualCreateShortLink'"
echo "   - Event source: 'Time-driven'"
echo "   - Event type: 'Minutes timer' (every 5 minutes)"
echo ""
echo "   Method C - Manual Trigger:"
echo "   - Use 'manualCreateShortLink()' function"
echo "   - Run it manually from the Apps Script editor"
echo "   - Or call the web app URL with POST data"
echo ""
echo "5. üß™ Test the Integration:"
echo "   - Run the 'testIntegration()' function in Apps Script"
echo "   - Check the execution log for results"
echo "   - Verify the short link was created in your admin panel"
echo ""
echo "6. üìä Monitor Results:"
echo "   - Check your URL shortener admin panel:"
echo "     https://go.monumental-i.com/admin/"
echo "   - Look for links with 'google-docs' tag"
echo "   - Monitor click analytics and performance"
echo ""
echo "üîó Useful URLs:"
echo "   - Apps Script Console: https://script.google.com/"
echo "   - Your Admin Panel: https://go.monumental-i.com/admin/"
echo "   - API Documentation: https://go.monumental-i.com/api/v1/docs"
echo ""
echo "üìû Support:"
echo "   - Check Firebase Function logs if issues occur"
echo "   - Use 'firebase functions:log' to debug"
echo "   - Test webhook manually with curl commands"

